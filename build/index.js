(()=>{"use strict";var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};const t=window.wp.blocks,r=window.wp.blockEditor,n=window.wp.components,o=window.wp.element,l=window.wp.apiFetch;var a=e.n(l);const i=window.ReactJSXRuntime;(0,t.registerBlockType)("proevent/event-grid",{title:"Event Grid",icon:"calendar",category:"widgets",attributes:{limit:{type:"number",default:6},category:{type:"string",default:""},order:{type:"string",default:"ASC"}},edit:({attributes:e,setAttributes:t,className:l})=>{const[s,c]=(0,o.useState)([]),[d,g]=(0,o.useState)(!0);return(0,o.useEffect)(()=>{g(!0),(async()=>{let t=null;if(e.category)try{const r=await a()({path:`/wp-json/wp/v2/event_category?slug=${e.category}`});r.length>0&&(t=r[0].id)}catch(e){console.error("Category fetch error",e)}let r=`/wp-json/wp/v2/event?per_page=${e.limit}&order=${e.order}`;t&&(r+=`&categories=${t}`);try{const e=await a()({path:r});c(e)}catch(e){console.error("Events fetch error",e),c([])}finally{g(!1)}})()},[e.limit,e.category,e.order]),(0,i.jsxs)(i.Fragment,{children:[(0,i.jsx)(r.InspectorControls,{children:(0,i.jsxs)(n.PanelBody,{title:"Event Grid Settings",children:[(0,i.jsx)(n.RangeControl,{label:"Number of Events",value:e.limit,onChange:e=>t({limit:e}),min:1,max:20}),(0,i.jsx)(n.TextControl,{label:"Category Slug",value:e.category,onChange:e=>t({category:e})}),(0,i.jsx)(n.SelectControl,{label:"Order",value:e.order,options:[{label:"Ascending",value:"ASC"},{label:"Descending",value:"DESC"}],onChange:e=>t({order:e})})]})}),(0,i.jsxs)("div",{className:l,children:[(0,i.jsx)("p",{children:"ðŸ“… Event Grid Preview"}),d&&(0,i.jsx)(n.Spinner,{}),!d&&0===s.length&&(0,i.jsx)("p",{children:"No events found."}),(0,i.jsx)("div",{className:"event-grid",children:s.map(e=>(0,i.jsxs)("div",{className:"event-item",children:[(0,i.jsx)("h3",{dangerouslySetInnerHTML:{__html:e.title.rendered}}),(0,i.jsx)("p",{children:new Date(e.date).toLocaleDateString()})]},e.id))})]})]})},save:()=>null}),(0,t.registerBlockType)("proevent/event-grid",{title:"Event Grid",icon:"calendar",category:"widgets",edit:()=>(0,i.jsx)("div",{...(0,r.useBlockProps)(),children:"ðŸ“… Event Grid (Preview)"}),save:()=>null})})();